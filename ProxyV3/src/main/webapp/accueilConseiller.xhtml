<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta charset="UTF-8" />
	<title>Accueil Conseiller</title>
	<!-- <h:outputStylesheet library="css" name="style.css" />-->
</h:head>
<body>

	<h:form id="formDataTable">
		<div>
			<Table width="100%">
				<tr>
					<td><h1>ProxiBanque V3.001</h1></td>
					<td><p align="right">
							<h:outputText value="#{userBean.conseiller.nom}"></h:outputText><br />
							<h:commandButton type="submit" value="se déconnecter"
								action="#{userBean.deloggue}"></h:commandButton>
						</p></td>
				</tr>
			</Table>
		</div>

		<hr />
		<h:messages errorClass="error" />

		<p:panel header="rechercher un client" style="width: 700;">
			<h:form>
				<h:panelGrid columns="3" cellpadding="2">
					<h:outputLabel for="#{userBean.searchUser}" value="Nom" />
					<h:inputText value="#{userBean.searchUser}" label="Nom"></h:inputText>
					<h:commandButton type="submit" value="Chercher"
						action="#{userBean.searchAUser}"></h:commandButton>
				</h:panelGrid>
			</h:form>
		</p:panel>

		<p:dataTable var="user" value="#{userBean.searchUsersResults}"
			selection="#{userBean.selectedUser}" selectionMode="single"
			style="width: 700" rowKey="#{user.id}" first="#{user.id}"
			paginator="true" rows="10" editable="true">

			<p:ajax event="rowSelect" update=":formDataTable:userUpdateForm"
				listener="#{userBean.onUserSelect}" />

			<p:column sortBy="#{user.id}" filterBy="#{user.id}">
				<f:facet name="header">
					<h:outputText value="Id" />
				</f:facet>
				<h:outputText value="#{user.id}" />
			</p:column>
			<p:column sortBy="#{user.nom}" filterBy="#{user.nom}">
				<f:facet name="header">
					<h:outputText value="Nom" />
				</f:facet>
				<h:outputText value="#{user.nom}" />
			</p:column>
			<p:column sortBy="#{user.prenom}" filterBy="#{user.prenom}">
				<f:facet name="header">
					<h:outputText value="Prenom" />
				</f:facet>
				<h:outputText value="#{user.prenom}" />
			</p:column>
			<p:column parser="date" sortBy="#{user.adresse}"
				filterBy="#{user.adresse}">
				<f:facet name="header">
					<h:outputText value="Adresse" />
				</f:facet>
				<h:outputText value="#{user.adresse}" />

			</p:column>
			<p:column sortBy="#{user.codePostal}" filterBy="#{user.codePostal}">
				<f:facet name="header">
					<h:outputText value="Code Postal" />
				</f:facet>
				<h:outputText value="#{user.codePostal}" />
			</p:column>
			<p:column sortBy="#{user.ville}" filterBy="#{user.ville}">
				<f:facet name="header">
					<h:outputText value="Ville" />
				</f:facet>
				<h:outputText value="#{user.ville}" />
			</p:column>
			<p:column sortBy="#{user.telephone}" filterBy="#{user.telelphone}">
				<f:facet name="header">
					<h:outputText value="Téléphone" />
				</f:facet>
				<h:outputText value="#{user.telephone}" />
			</p:column>

		</p:dataTable>

		<p:panel id="userDetailsPanelId" header="infos client"
			style="width: 700;" widgetVar="oneUser">
			<h:panelGrid columns="2" cellpadding="2" id="userUpdateForm"
				border="0">
				<!-- <h:outputLabel for="#{userBean.selectedUser.id}" value="Id" /> -->
				<h:inputHidden value="#{userBean.selectedUser.id}"
					style="width: 100;" readonly="true"></h:inputHidden>

				<h:outputLabel for="#{userBean.selectedUser.nom}" value="Nom" />
				<h:inputText value="#{userBean.selectedUser.nom}"></h:inputText>

				<h:outputLabel for="#{userBean.selectedUser.prenom}" value="Prenom" />
				<h:inputText value="#{userBean.selectedUser.prenom}"></h:inputText>

				<h:outputLabel for="#{userBean.selectedUser.adresse}"
					value="Adresse" />
				<h:inputText value="#{userBean.selectedUser.adresse}"></h:inputText>

				<h:outputLabel for="#{userBean.selectedUser.codePostal}"
					value="Code Postal" />
				<h:inputText value="#{userBean.selectedUser.codePostal}">
					<!-- <f:convertDateTime pattern="MM/dd/yyyy" /> -->
				</h:inputText>

				<h:outputLabel for="#{userBean.selectedUser.ville}" value="Ville" />
				<h:inputText value="#{userBean.selectedUser.ville}"></h:inputText>

				<h:outputLabel for="#{userBean.selectedUser.telephone}"
					value="Telephone" />
				<h:inputText value="#{userBean.selectedUser.telephone}"></h:inputText>

				<h:outputLabel for="#{userBean.selectedUser.typeClient}"
					value="Type" />
				<h:selectOneRadio value="#{userBean.selectedUser.typeClient}">
					<f:selectItem itemValue="particulier" itemLabel="Particulier" />
					<f:selectItem itemValue="entreprise" itemLabel="Entreprise" />
				</h:selectOneRadio>

			</h:panelGrid>

			<h:commandButton type="submit" value="Ajouter ce client"
				action="#{userBean.addUser}"></h:commandButton>
			<h:commandButton type="submit" value="Modifier ce client"
				action="#{userBean.updateUser}"></h:commandButton>
			<h:commandButton type="submit" value="Supprimer ce client"
				action="#{userBean.removeUser}"></h:commandButton>

			<p:dataTable var="userx" value="#{userBean.selectedUser.comptes}"
				selection="#{userBean.selectedUser}" selectionMode="single"
				style="width: 700" rowKey="#{userx.id}" first="#{userx.id}"
				paginator="true" rows="10" editable="true">

				<p:ajax event="rowSelect" update=":formDataTable:userUpdateForm"
					listener="#{userBean.onUserSelect}" />

				<p:column sortBy="#{userx.typeCompte}"
					filterBy="#{userx.typeCompte}">
					<f:facet name="header">
						<h:outputText value="Type de compte" />
					</f:facet>
					<h:outputText value="#{userx.typeCompte}" />
				</p:column>
				<p:column sortBy="#{userx.numerocompte}"
					filterBy="#{userx.numerocompte}">
					<f:facet name="header">
						<h:outputText value="Numéro de compte" />
					</f:facet>
					<h:outputText value="#{userx.numerocompte}" />
				</p:column>
				<p:column sortBy="#{userx.solde}" filterBy="#{userx.solde}">
					<f:facet name="header">
						<h:outputText value="Solde" />
					</f:facet>
					<h:outputText value="#{userx.solde}" />
				</p:column>
				<!-- 	<p:column sortBy="#{userx.decouverteAutorise}"
					filterBy="#{userx.decouverteAutorise}">
					<f:facet name="header">
						<h:outputText value="Découvert autorisé" />
					</f:facet>
					<h:outputText value="#{userx.decouverteAutorise}" />
				</p:column>
				<p:column sortBy="#{userx.tauxRemuneration}"
					filterBy="#{userx.tauxRemuneration}">
					<f:facet name="header">
						<h:outputText value="Taux de rémunération" />
					</f:facet>
					<h:outputText value="#{userx.tauxRemuneration}" /> 
				</p:column>-->
				<p:column sortBy="#{userx.dateOuverture}"
					filterBy="#{userx.dateOuverture}">
					<f:facet name="header">
						<h:outputText value="Date d'ouverture" />
					</f:facet>
					<h:outputText value="#{userx.dateOuverture}" />
				</p:column>


			</p:dataTable>

		</p:panel>

	</h:form>
	<div>
		<p>copyright @laurent chretien market</p>
	</div>
</body>
</html>